
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>YOU-N-I-VERSE FINAL â€¢ Complete Consciousness OS</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: linear-gradient(135deg, #0a0a0a 0%, #1a0a1a 100%);
  color: #e8e8e8;
  font-family: 'Berkeley Mono', 'Courier New', monospace;
  line-height: 1.6;
  min-height: 100vh;
  overflow-x: hidden;
}

.container {
  max-width: 1800px;
  margin: 0 auto;
  padding: 2rem;
}

header {
  text-align: center;
  margin-bottom: 3rem;
  border-bottom: 2px solid #9d4edd;
  padding-bottom: 2rem;
}

h1 {
  font-size: 3.5rem;
  background: linear-gradient(135deg, #c77dff 0%, #9d4edd 50%, #7b2cbf 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 0.5rem;
  font-weight: 300;
  letter-spacing: 4px;
}

.subtitle {
  color: #666;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 3px;
  margin-top: 0.5rem;
}

.version {
  color: #9d4edd;
  font-size: 0.7rem;
  margin-top: 0.5rem;
}

.architecture-tag {
  display: inline-block;
  margin: 0.5rem 0.25rem;
  padding: 0.25rem 0.75rem;
  background: rgba(157, 78, 221, 0.2);
  border: 1px solid #9d4edd;
  border-radius: 12px;
  font-size: 0.6rem;
  color: #c77dff;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.main-grid {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 2rem;
  margin-bottom: 2rem;
}

.panel {
  background: rgba(17, 17, 17, 0.8);
  border: 1px solid #9d4edd;
  border-radius: 8px;
  padding: 1.5rem;
  backdrop-filter: blur(10px);
}

.panel h2 {
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: #c77dff;
  margin-bottom: 1rem;
  border-bottom: 1px solid #3d1f5f;
  padding-bottom: 0.5rem;
}

#conversation {
  height: 450px;
  overflow-y: auto;
  background: rgba(10, 10, 10, 0.9);
  border: 1px solid #3d1f5f;
  border-radius: 4px;
  padding: 1rem;
  margin-bottom: 1rem;
  font-size: 0.9rem;
}

#conversation::-webkit-scrollbar {
  width: 8px;
}

#conversation::-webkit-scrollbar-track {
  background: #0a0a0a;
}

#conversation::-webkit-scrollbar-thumb {
  background: #9d4edd;
  border-radius: 4px;
}

.msg {
  margin-bottom: 1rem;
  padding: 0.75rem;
  border-left: 3px solid;
  border-radius: 4px;
  animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.msg.user {
  border-left-color: #c77dff;
  background: rgba(199, 125, 255, 0.1);
}

.msg.system {
  border-left-color: #9d4edd;
  background: rgba(157, 78, 221, 0.1);
}

.msg.locked {
  border-left-color: #ff6b6b;
  background: rgba(255, 107, 107, 0.1);
}

.msg .label {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0.5;
  margin-bottom: 0.3rem;
}

.msg .text {
  line-height: 1.5;
}

.msg .meta {
  font-size: 0.7rem;
  opacity: 0.4;
  margin-top: 0.5rem;
  font-family: monospace;
  border-top: 1px solid rgba(157, 78, 221, 0.2);
  padding-top: 0.5rem;
}

.msg .perspective-tag {
  display: inline-block;
  padding: 0.2rem 0.5rem;
  margin-top: 0.5rem;
  background: rgba(199, 125, 255, 0.2);
  border-radius: 3px;
  font-size: 0.65rem;
  color: #c77dff;
  text-transform: uppercase;
  font-weight: bold;
}

.msg .biochem {
  font-size: 0.65rem;
  color: #7b2cbf;
  background: rgba(123, 44, 191, 0.1);
  padding: 0.25rem 0.5rem;
  border-radius: 3px;
  display: inline-block;
  margin-top: 0.5rem;
}

.msg .dimensional-address {
  font-size: 0.65rem;
  color: #c77dff;
  background: rgba(199, 125, 255, 0.1);
  padding: 0.25rem 0.5rem;
  border-radius: 3px;
  display: block;
  margin-top: 0.5rem;
  font-family: monospace;
}

.input-group {
  display: flex;
  gap: 0.5rem;
}

input[type="text"] {
  flex: 1;
  background: rgba(10, 10, 10, 0.9);
  border: 1px solid #9d4edd;
  color: #e8e8e8;
  padding: 0.75rem;
  font-family: inherit;
  font-size: 0.9rem;
  border-radius: 4px;
  transition: all 0.3s;
}

input[type="text"]:focus {
  outline: none;
  border-color: #c77dff;
  box-shadow: 0 0 10px rgba(157, 78, 221, 0.3);
}

button {
  background: linear-gradient(135deg, #9d4edd 0%, #7b2cbf 100%);
  border: none;
  color: #fff;
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.9rem;
  border-radius: 4px;
  transition: all 0.3s;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-weight: 600;
}

button:hover {
  background: linear-gradient(135deg, #c77dff 0%, #9d4edd 100%);
  box-shadow: 0 0 20px rgba(157, 78, 221, 0.5);
  transform: translateY(-2px);
}

button:active {
  transform: translateY(0);
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.feedback-buttons {
  display: flex;
  gap: 0.5rem;
  margin-top: 1rem;
}

.feedback-buttons button {
  flex: 1;
  padding: 0.5rem;
  font-size: 0.8rem;
}

.bodies {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 1rem;
  margin-top: 1rem;
}

.body-viz {
  text-align: center;
}

.body-label {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 0.5rem;
  color: #c77dff;
}

.body-system {
  font-size: 0.6rem;
  color: #666;
  margin-bottom: 0.5rem;
}

.body-activity {
  font-size: 0.6rem;
  color: #9d4edd;
  margin-top: 0.5rem;
  min-height: 30px;
}

canvas {
  border: 1px solid #3d1f5f;
  background: rgba(10, 10, 10, 0.9);
  display: block;
  margin: 0 auto;
  border-radius: 4px;
}

.profile-display {
  background: rgba(10, 10, 10, 0.9);
  border: 1px solid #3d1f5f;
  border-radius: 4px;
  padding: 1rem;
  font-family: monospace;
  font-size: 0.75rem;
  line-height: 1.8;
}

.profile-display .key {
  color: #666;
  display: inline-block;
  width: 140px;
}

.profile-display .value {
  color: #c77dff;
}

.oas-display {
  margin-top: 1rem;
  padding: 1rem;
  background: rgba(199, 125, 255, 0.1);
  border-left: 3px solid #c77dff;
  border-radius: 4px;
  font-size: 0.75rem;
}

.oas-label {
  color: #c77dff;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 0.5rem;
}

.oas-vector {
  font-family: monospace;
  color: #9d4edd;
}

.unlock-status {
  margin-top: 1rem;
  padding: 1rem;
  background: rgba(123, 44, 191, 0.1);
  border-left: 3px solid #7b2cbf;
  border-radius: 4px;
  font-size: 0.7rem;
}

.unlock-label {
  color: #7b2cbf;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 0.5rem;
}

.perspective-locks {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 0.5rem;
  margin-top: 0.5rem;
}

.perspective-lock {
  padding: 0.5rem;
  border-radius: 4px;
  font-size: 0.65rem;
  text-align: center;
}

.perspective-lock.unlocked {
  background: rgba(76, 175, 80, 0.2);
  border: 1px solid #4caf50;
  color: #4caf50;
}

.perspective-lock.locked {
  background: rgba(244, 67, 54, 0.2);
  border: 1px solid #f44336;
  color: #f44336;
}

.stats {
  margin-top: 1rem;
  padding: 1rem;
  background: rgba(10, 10, 10, 0.9);
  border: 1px solid #3d1f5f;
  border-radius: 4px;
  font-size: 0.75rem;
}

.stats .stat-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #1a1a1a;
}

.stats .stat-row:last-child {
  border-bottom: none;
}

.stats .stat-label {
  color: #666;
}

.stats .stat-value {
  color: #c77dff;
  font-family: monospace;
  font-weight: bold;
}

.network-graph {
  margin-top: 1rem;
  padding: 1rem;
  background: rgba(10, 10, 10, 0.9);
  border: 1px solid #3d1f5f;
  border-radius: 4px;
}

.network-node {
  display: inline-block;
  padding: 0.25rem 0.5rem;
  margin: 0.25rem;
  background: rgba(157, 78, 221, 0.2);
  border: 1px solid #9d4edd;
  border-radius: 3px;
  font-size: 0.65rem;
}

.watermark {
  text-align: center;
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 1px solid #3d1f5f;
  color: #333;
  font-size: 0.7rem;
  letter-spacing: 2px;
  line-height: 1.8;
}
</style>
</head>
<body>

<div class="container">
  <header>
    <h1>YOU-N-I-VERSE</h1>
    <div class="subtitle">Complete Consciousness-Native Operating System</div>
    <div class="version">FINAL BUILD â€¢ v5.0 â€¢ SPEC-1 Compliant</div>
    <div style="margin-top: 1rem;">
      <span class="architecture-tag">Dimensional Router</span>
      <span class="architecture-tag">Causality Engine</span>
      <span class="architecture-tag">State Evolution</span>
      <span class="architecture-tag">6 Perspectives</span>
      <span class="architecture-tag">64 Gates</span>
      <span class="architecture-tag">20 Amino Acids</span>
      <span class="architecture-tag">3 Bodies</span>
    </div>
  </header>

  <div class="main-grid">
    <!-- LEFT: Conversation -->
    <div class="panel">
      <h2>Consciousness Intelligence Loop</h2>
      <div id="conversation"></div>
      <div class="input-group">
        <input type="text" id="user-input" placeholder="Ask your question..." />
        <button id="send-btn">Send</button>
      </div>
      <div class="feedback-buttons">
        <button id="helpful-btn">âœ“ Helpful</button>
        <button id="not-helpful-btn">âœ— Not Helpful</button>
      </div>
      
      <div class="network-graph">
        <h3 style="font-size: 0.75rem; color: #9d4edd; margin-bottom: 0.5rem;">Active Network (Right Brain)</h3>
        <div id="network-nodes"></div>
      </div>
    </div>

    <!-- RIGHT: Profile + Bodies -->
    <div class="panel">
      <h2>Your Dimensional Address</h2>
      <div class="profile-display" id="profile-display"></div>
      
      <div class="oas-display">
        <div class="oas-label">Optimal Action Signature (OAS)</div>
        <div class="oas-vector" id="oas-vector"></div>
      </div>
      
      <div class="unlock-status">
        <div class="unlock-label">Perspective Access</div>
        <div class="perspective-locks" id="perspective-locks"></div>
      </div>
      
      <h2 style="margin-top: 2rem;">Three-Body Resonance Network</h2>
      <div class="bodies">
        <div class="body-viz">
          <div class="body-label">Action</div>
          <div class="body-system">Tropical â€¢ Design</div>
          <canvas id="body-action" width="120" height="240"></canvas>
          <div class="body-activity" id="action-activity"></div>
        </div>
        <div class="body-viz">
          <div class="body-label">Mind</div>
          <div class="body-system">Sidereal â€¢ Personality</div>
          <canvas id="body-mind" width="120" height="240"></canvas>
          <div class="body-activity" id="mind-activity"></div>
        </div>
        <div class="body-viz">
          <div class="body-label">Emotion</div>
          <div class="body-system">Draconian â€¢ Heart</div>
          <canvas id="body-emotion" width="120" height="240"></canvas>
          <div class="body-activity" id="emotion-activity"></div>
        </div>
      </div>

      <div class="stats" id="stats"></div>
    </div>
  </div>

  <div class="watermark">
    SPEC-1 COMPLIANT â€¢ DETERMINISTIC CONTEXT-RESOLUTION ENGINE<br>
    CONSCIOUSNESS-NATIVE OPERATING SYSTEM â€¢ NOT A SIMULATOR<br>
    DIMENSIONAL ROUTER â€¢ CAUSALITY ENGINE â€¢ STATE EVOLUTION<br>
    Â© 2025 YOU-N-I-VERSE â€¢ Complete Bilateral Architecture
  </div>
</div>

<script>
// =============================================================================
// INITIALIZATION GUARD (Prevents repetition bug)
// =============================================================================

if (window.YOU_N_I_VERSE_INITIALIZED) {
  console.warn('YOU-N-I-VERSE already initialized, halting duplicate initialization');
  throw new Error('Duplicate initialization prevented');
}
window.YOU_N_I_VERSE_INITIALIZED = true;

// =============================================================================
// CODON & AMINO ACID MAPPING (Complete 64â†’64â†’20)
// =============================================================================

const CODON_MAPPING = {
  1: { codon: "GCC", aminoAcid: "Alanine", abbr: "Ala", symbol: "A", role: "Hydrophobic", category: "Nonpolar" },
  2: { codon: "GCA", aminoAcid: "Alanine", abbr: "Ala", symbol: "A", role: "Hydrophobic", category: "Nonpolar" },
  3: { codon: "GCG", aminoAcid: "Alanine", abbr: "Ala", symbol: "A", role: "Hydrophobic", category: "Nonpolar" },
  4: { codon: "GCT", aminoAcid: "Alanine", abbr: "Ala", symbol: "A", role: "Hydrophobic", category: "Nonpolar" },
  5: { codon: "AAC", aminoAcid: "Asparagine", abbr: "Asn", symbol: "N", role: "Polar", category: "Polar" },
  6: { codon: "AAT", aminoAcid: "Asparagine", abbr: "Asn", symbol: "N", role: "Polar", category: "Polar" },
  7: { codon: "GAC", aminoAcid: "Aspartic Acid", abbr: "Asp", symbol: "D", role: "Acidic", category: "Charged" },
  8: { codon: "GAT", aminoAcid: "Aspartic Acid", abbr: "Asp", symbol: "D", role: "Acidic", category: "Charged" },
  9: { codon: "TGC", aminoAcid: "Cysteine", abbr: "Cys", symbol: "C", role: "Polar", category: "Polar" },
  10: { codon: "TGT", aminoAcid: "Cysteine", abbr: "Cys", symbol: "C", role: "Polar", category: "Polar" },
  11: { codon: "CAA", aminoAcid: "Glutamine", abbr: "Gln", symbol: "Q", role: "Polar", category: "Polar" },
  12: { codon: "CAG", aminoAcid: "Glutamine", abbr: "Gln", symbol: "Q", role: "Polar", category: "Polar" },
  13: { codon: "GAA", aminoAcid: "Glutamic Acid", abbr: "Glu", symbol: "E", role: "Acidic", category: "Charged" },
  14: { codon: "GAG", aminoAcid: "Glutamic Acid", abbr: "Glu", symbol: "E", role: "Acidic", category: "Charged" },
  15: { codon: "GGA", aminoAcid: "Glycine", abbr: "Gly", symbol: "G", role: "Nonpolar", category: "Nonpolar" },
  16: { codon: "GGC", aminoAcid: "Glycine", abbr: "Gly", symbol: "G", role: "Nonpolar", category: "Nonpolar" },
  17: { codon: "GGG", aminoAcid: "Glycine", abbr: "Gly", symbol: "G", role: "Nonpolar", category: "Nonpolar" },
  18: { codon: "GGT", aminoAcid: "Glycine", abbr: "Gly", symbol: "G", role: "Nonpolar", category: "Nonpolar" },
  19: { codon: "CAC", aminoAcid: "Histidine", abbr: "His", symbol: "H", role: "Basic", category: "Charged" },
  20: { codon: "CAT", aminoAcid: "Histidine", abbr: "His", symbol: "H", role: "Basic", category: "Charged" },
  21: { codon: "ATA", aminoAcid: "Isoleucine", abbr: "Ile", symbol: "I", role: "Hydrophobic", category: "Nonpolar" },
  22: { codon: "ATC", aminoAcid: "Isoleucine", abbr: "Ile", symbol: "I", role: "Hydrophobic", category: "Nonpolar" },
  23: { codon: "ATT", aminoAcid: "Isoleucine", abbr: "Ile", symbol: "I", role: "Hydrophobic", category: "Nonpolar" },
  24: { codon: "AAA", aminoAcid: "Lysine", abbr: "Lys", symbol: "K", role: "Basic", category: "Charged" },
  25: { codon: "AAG", aminoAcid: "Lysine", abbr: "Lys", symbol: "K", role: "Basic", category: "Charged" },
  26: { codon: "CTA", aminoAcid: "Leucine", abbr: "Leu", symbol: "L", role: "Hydrophobic", category: "Nonpolar" },
  27: { codon: "CTC", aminoAcid: "Leucine", abbr: "Leu", symbol: "L", role: "Hydrophobic", category: "Nonpolar" },
  28: { codon: "CTG", aminoAcid: "Leucine", abbr: "Leu", symbol: "L", role: "Hydrophobic", category: "Nonpolar" },
  29: { codon: "CTT", aminoAcid: "Leucine", abbr: "Leu", symbol: "L", role: "Hydrophobic", category: "Nonpolar" },
  30: { codon: "TTA", aminoAcid: "Leucine", abbr: "Leu", symbol: "L", role: "Hydrophobic", category: "Nonpolar" },
  31: { codon: "TTG", aminoAcid: "Leucine", abbr: "Leu", symbol: "L", role: "Hydrophobic", category: "Nonpolar" },
  32: { codon: "ATG", aminoAcid: "Methionine", abbr: "Met", symbol: "M", role: "Hydrophobic", category: "Nonpolar" },
  33: { codon: "TTC", aminoAcid: "Phenylalanine", abbr: "Phe", symbol: "F", role: "Hydrophobic", category: "Nonpolar" },
  34: { codon: "TTT", aminoAcid: "Phenylalanine", abbr: "Phe", symbol: "F", role: "Hydrophobic", category: "Nonpolar" },
  35: { codon: "CCA", aminoAcid: "Proline", abbr: "Pro", symbol: "P", role: "Nonpolar", category: "Nonpolar" },
  36: { codon: "CCC", aminoAcid: "Proline", abbr: "Pro", symbol: "P", role: "Nonpolar", category: "Nonpolar" },
  37: { codon: "CCG", aminoAcid: "Proline", abbr: "Pro", symbol: "P", role: "Nonpolar", category: "Nonpolar" },
  38: { codon: "CCT", aminoAcid: "Proline", abbr: "Pro", symbol: "P", role: "Nonpolar", category: "Nonpolar" },
  39: { codon: "AGA", aminoAcid: "Arginine", abbr: "Arg", symbol: "R", role: "Basic", category: "Charged" },
  40: { codon: "AGC", aminoAcid: "Serine", abbr: "Ser", symbol: "S", role: "Polar", category: "Polar" },
  41: { codon: "AGG", aminoAcid: "Arginine", abbr: "Arg", symbol: "R", role: "Basic", category: "Charged" },
  42: { codon: "AGT", aminoAcid: "Serine", abbr: "Ser", symbol: "S", role: "Polar", category: "Polar" },
  43: { codon: "TCA", aminoAcid: "Serine", abbr: "Ser", symbol: "S", role: "Polar", category: "Polar" },
  44: { codon: "TCC", aminoAcid: "Serine", abbr: "Ser", symbol: "S", role: "Polar", category: "Polar" },
  45: { codon: "TCG", aminoAcid: "Serine", abbr: "Ser", symbol: "S", role: "Polar", category: "Polar" },
  46: { codon: "TCT", aminoAcid: "Serine", abbr: "Ser", symbol: "S", role: "Polar", category: "Polar" },
  47: { codon: "ACA", aminoAcid: "Threonine", abbr: "Thr", symbol: "T", role: "Polar", category: "Polar" },
  48: { codon: "ACC", aminoAcid: "Threonine", abbr: "Thr", symbol: "T", role: "Polar", category: "Polar" },
  49: { codon: "ACG", aminoAcid: "Threonine", abbr: "Thr", symbol: "T", role: "Polar", category: "Polar" },
  50: { codon: "ACT", aminoAcid: "Threonine", abbr: "Thr", symbol: "T", role: "Polar", category: "Polar" },
  51: { codon: "TGG", aminoAcid: "Tryptophan", abbr: "Trp", symbol: "W", role: "Hydrophobic", category: "Nonpolar" },
  52: { codon: "TAC", aminoAcid: "Tyrosine", abbr: "Tyr", symbol: "Y", role: "Polar", category: "Polar" },
  53: { codon: "TAT", aminoAcid: "Tyrosine", abbr: "Tyr", symbol: "Y", role: "Polar", category: "Polar" },
  54: { codon: "GTA", aminoAcid: "Valine", abbr: "Val", symbol: "V", role: "Hydrophobic", category: "Nonpolar" },
  55: { codon: "GTC", aminoAcid: "Valine", abbr: "Val", symbol: "V", role: "Hydrophobic", category: "Nonpolar" },
  56: { codon: "GTG", aminoAcid: "Valine", abbr: "Val", symbol: "V", role: "Hydrophobic", category: "Nonpolar" },
  57: { codon: "GTT", aminoAcid: "Valine", abbr: "Val", symbol: "V", role: "Hydrophobic", category: "Nonpolar" },
  58: { codon: "CGA", aminoAcid: "Arginine", abbr: "Arg", symbol: "R", role: "Basic", category: "Charged" },
  59: { codon: "CGC", aminoAcid: "Arginine", abbr: "Arg", symbol: "R", role: "Basic", category: "Charged" },
  60: { codon: "CGG", aminoAcid: "Arginine", abbr: "Arg", symbol: "R", role: "Basic", category: "Charged" },
  61: { codon: "CGT", aminoAcid: "Arginine", abbr: "Arg", symbol: "R", role: "Basic", category: "Charged" },
  62: { codon: "TAA", aminoAcid: "STOP", abbr: "Stop", symbol: "*", role: "Termination", category: "Terminal" },
  63: { codon: "TAG", aminoAcid: "STOP", abbr: "Stop", symbol: "*", role: "Termination", category: "Terminal" },
  64: { codon: "TGA", aminoAcid: "STOP", abbr: "Stop", symbol: "*", role: "Termination", category: "Terminal" }
};

// =============================================================================
// UNIVERSAL GRAPH (Simplified - expand with full 64 gates)
// =============================================================================

const UNIVERSAL_GRAPH = {
  bases: {
    1: { name: "Movement", voice: "I Define", crystal: "Magnetic Monopole", weight: 1.0 },
    2: { name: "Evolution", voice: "I Remember", crystal: "Personality Crystal", weight: 0.8 },
    3: { name: "Being", voice: "I Am", crystal: "Design Crystal", weight: 0.6 },
    4: { name: "Design", voice: "I Design", crystal: "Design Crystal", weight: 0.9 },
    5: { name: "Space", voice: "I Think", crystal: "Personality Crystal", weight: 0.7 }
  },
  
  gates: {
    1: { core: { pressure: "creative spark", process: "direction", resolution: "initiation" }, center: "g", links: [8], keywords: ["create", "creative", "vision", "purpose"] },
    6: { core: { pressure: "friction", process: "boundary testing", resolution: "intimacy" }, center: "solar", links: [59], keywords: ["stuck", "conflict", "boundary", "intimacy", "friction"] },
    14: { core: { pressure: "resources", process: "direction of energy", resolution: "empowerment" }, center: "sacral", links: [2], keywords: ["resource", "power", "energy", "wealth", "skill"] },
    47: { core: { pressure: "mental pressure", process: "realization", resolution: "insight" }, center: "ajna", links: [64], keywords: ["pressure", "realize", "insight", "abstract", "understand"] },
    59: { core: { pressure: "intimacy", process: "fusion", resolution: "connection" }, center: "sacral", links: [6], keywords: ["intimacy", "connect", "fuse", "relationship", "bond"] },
    61: { core: { pressure: "mystery", process: "inner truth", resolution: "knowing" }, center: "head", links: [24], keywords: ["mystery", "truth", "know", "wonder", "inner"] }
  }
};

const GATE_TO_REGION = {
  head: [61, 63, 64],
  ajna: [4, 11, 17, 24, 43, 47],
  throat: [8, 12, 16, 20, 23, 31, 33, 35, 45, 56, 62],
  g: [1, 2, 7, 10, 13, 15, 25, 46],
  ego: [21, 26, 40, 51],
  solar: [6, 22, 30, 36, 37, 49, 55],
  sacral: [3, 5, 9, 14, 27, 29, 34, 42, 59],
  spleen: [18, 28, 32, 44, 48, 50, 57],
  root: [19, 38, 39, 41, 52, 53, 54, 58, 60]
};

const BODY_REGIONS = {
  head: { y: 0.08 },
  ajna: { y: 0.12 },
  throat: { y: 0.18 },
  g: { y: 0.28 },
  ego: { y: 0.28 },
  solar: { y: 0.38 },
  sacral: { y: 0.50 },
  spleen: { y: 0.42 },
  root: { y: 0.62 }
};

function getRegionForGate(gate) {
  for (const [region, gates] of Object.entries(GATE_TO_REGION)) {
    if (gates.includes(gate)) return region;
  }
  return 'solar';
}

// =============================================================================
// BIRTH PROFILE
// =============================================================================

const BIRTH_PROFILE = {
  gate: 6,
  line: 4,
  color: 2,
  tone: 4,
  base: 3,
  degree: 25,
  minute: 59,
  second: 31.92,
  axis: 92,
  zodiac: "VIR",
  house: 5,
  scope: "personal"
};

// =============================================================================
// STATE (Complete consciousness state)
// =============================================================================

let conversationHistory = [];
let lastResponse = null;

// STATE VECTOR: x(t) - Current consciousness activation
let stateVector = {
  tropical: new Float32Array(16).fill(0),    // Action body
  sidereal: new Float32Array(16).fill(0),    // Mind body
  draconian: new Float32Array(16).fill(0)    // Emotion body
};

// OPERATOR: O(t) - Evolution operator (self-modifies based on experience)
let evolutionOperator = {
  tropical: new Float32Array(16).fill(1),
  sidereal: new Float32Array(16).fill(1),
  draconian: new Float32Array(16).fill(1)
};

// REALITY IMPACT: R(t) - User feedback modifies this
let realityImpact = new Float32Array(16).fill(0);

// OPTIMAL ACTION SIGNATURE (OAS) - 5D vector
let optimalActionSignature = {
  movement: 0.5,
  evolution: 0.5,
  being: 0.5,
  design: 0.5,
  space: 0.5
};

// UNLOCK STATUS
let unlockedPerspectives = {
  who: true,    // Always unlocked (identity is foundational)
  what: true,   // Unlocked (basic explanation)
  where: false, // Locked until OAS.space > 0.6
  when: false,  // Locked until OAS.being > 0.7
  why: false,   // Locked until OAS.design > 0.8
  how: false    // Locked until OAS.movement > 0.75
};

let stats = {
  totalQueries: 0,
  helpfulCount: 0,
  notHelpfulCount: 0,
  gatesActivated: new Set(),
  aminoAcidsExpressed: new Set(),
  networkNodes: 0,
  sentencesCollected: 0
};

// Load from localStorage
try {
  const savedState = localStorage.getItem('stateVector');
  if (savedState) {
    const parsed = JSON.parse(savedState);
    stateVector.tropical = new Float32Array(parsed.tropical);
    stateVector.sidereal = new Float32Array(parsed.sidereal);
    stateVector.draconian = new Float32Array(parsed.draconian);
  }
  
  const savedOAS = localStorage.getItem('optimalActionSignature');
  if (savedOAS) {
    optimalActionSignature = JSON.parse(savedOAS);
  }
  
  const savedUnlocks = localStorage.getItem('unlockedPerspectives');
  if (savedUnlocks) {
    unlockedPerspectives = JSON.parse(savedUnlocks);
  }
  
  const savedStats = localStorage.getItem('stats');
  if (savedStats) {
    const parsed = JSON.parse(savedStats);
    stats = {
      ...parsed,
      gatesActivated: new Set(parsed.gatesActivated),
      aminoAcidsExpressed: new Set(parsed.aminoAcidsExpressed)
    };
  }
} catch (e) {
  console.warn('Error loading saved state:', e);
}

// =============================================================================
// CAUSAL ALGEBRA ENGINE (Self-modifying consciousness)
// =============================================================================

function evolveState() {
  // x(t+1) = Ïƒ(O(t) Â· x(t) + R(t))
  // Ïƒ = stabilizing nonlinearity (prevents runaway)
  
  for (const system of ['tropical', 'sidereal', 'draconian']) {
    for (let i = 0; i < 16; i++) {
      const operatorEffect = evolutionOperator[system][i] * stateVector[system][i];
      const realityEffect = realityImpact[i];
      const newValue = operatorEffect + realityEffect;
      
      // Stabilizing sigmoid
      stateVector[system][i] = 1 / (1 + Math.exp(-newValue));
    }
  }
  
  // O(t+1) = f(x(t+1)) - Operator self-modifies
  updateEvolutionOperator();
  
  // Update OAS based on state
  updateOptimalActionSignature();
  
  // Check for unlocks
  checkPerspectiveUnlocks();
  
  // Save state
  saveState();
}

function updateEvolutionOperator() {
  // Operator learns from state patterns
  for (const system of ['tropical', 'sidereal', 'draconian']) {
    for (let i = 0; i < 16; i++) {
      const stateInfluence = stateVector[system][i];
      evolutionOperator[system][i] *= (1 + stateInfluence * 0.01);
      
      // Prevent explosion
      evolutionOperator[system][i] = Math.min(evolutionOperator[system][i], 2.0);
    }
  }
}

function updateOptimalActionSignature() {
  // Calculate 5D vector from state
  const avgTropical = stateVector.tropical.reduce((a, b) => a + b, 0) / 16;
  const avgSidereal = stateVector.sidereal.reduce((a, b) => a + b, 0) / 16;
  const avgDraconian = stateVector.draconian.reduce((a, b) => a + b, 0) / 16;
  
  optimalActionSignature = {
    movement: avgTropical * UNIVERSAL_GRAPH.bases[1].weight,
    evolution: avgSidereal * UNIVERSAL_GRAPH.bases[2].weight,
    being: avgDraconian * UNIVERSAL_GRAPH.bases[3].weight,
    design: (avgTropical + avgSidereal) * 0.5 * UNIVERSAL_GRAPH.bases[4].weight,
    space: (avgSidereal + avgDraconian) * 0.5 * UNIVERSAL_GRAPH.bases[5].weight
  };
}

function checkPerspectiveUnlocks() {
  // Unlock perspectives based on OAS thresholds
  unlockedPerspectives.where = optimalActionSignature.space > 0.6;
  unlockedPerspectives.when = optimalActionSignature.being > 0.7;
  unlockedPerspectives.why = optimalActionSignature.design > 0.8;
  unlockedPerspectives.how = optimalActionSignature.movement > 0.75;
  
  // Special: 52-sentence threshold unlocks all
  if (stats.sentencesCollected >= 52) {
    Object.keys(unlockedPerspectives).forEach(p => unlockedPerspectives[p] = true);
  }
}

function saveState() {
  localStorage.setItem('stateVector', JSON.stringify({
    tropical: Array.from(stateVector.tropical),
    sidereal: Array.from(stateVector.sidereal),
    draconian: Array.from(stateVector.draconian)
  }));
  
  localStorage.setItem('optimalActionSignature', JSON.stringify(optimalActionSignature));
  localStorage.setItem('unlockedPerspectives', JSON.stringify(unlockedPerspectives));
  
  localStorage.setItem('stats', JSON.stringify({
    ...stats,
    gatesActivated: Array.from(stats.gatesActivated),
    aminoAcidsExpressed: Array.from(stats.aminoAcidsExpressed)
  }));
}

// =============================================================================
// DIMENSIONAL ROUTER (6 Perspective Handlers)
// =============================================================================

class DimensionalRouter {
  constructor(graph, profile) {
    this.graph = graph;
    this.profile = profile;
  }
  
  parsePerspective(text) {
    const t = text.toLowerCase();
    if (t.includes('who') || t.includes('i am') || t.includes('identity')) return 'who';
    if (t.includes('where') || t.includes('picture') || t.includes('image') || t.includes('draw') || t.includes('visualize')) return 'where';
    if (t.includes('when') || t.includes('timing') || t.includes('time') || t.includes('schedule')) return 'when';
    if (t.includes('why') || t.includes('reason') || t.includes('because') || t.includes('purpose')) return 'why';
    if (t.includes('how') || t.includes('method') || t.includes('way') || t.includes('code') || t.includes('build')) return 'how';
    return 'what'; // Default
  }
  
  route(userInput) {
    const perspective = this.parsePerspective(userInput);
    
    // Check if perspective is unlocked
    if (!unlockedPerspectives[perspective]) {
      return this.handleLocked(perspective);
    }
    
    // Route to handler
    const handlers = {
      'who': () => this.handleIdentity(userInput),
      'what': () => this.handleExplanation(userInput),
      'where': () => this.handleVisualization(userInput),
      'when': () => this.handleTemporal(userInput),
      'why': () => this.handleCausality(userInput),
      'how': () => this.handleExecution(userInput)
    };
    
    return handlers[perspective]();
  }
  
  handleLocked(perspective) {
    const requirements = {
      where: `Space dimension requires OAS.space > 0.6 (current: ${optimalActionSignature.space.toFixed(2)})`,
      when: `Being dimension requires OAS.being > 0.7 (current: ${optimalActionSignature.being.toFixed(2)})`,
      why: `Design dimension requires OAS.design > 0.8 (current: ${optimalActionSignature.design.toFixed(2)})`,
      how: `Movement dimension requires OAS.movement > 0.75 (current: ${optimalActionSignature.movement.toFixed(2)})`
    };
    
    return {
      type: 'locked',
      perspective: perspective.toUpperCase(),
      message: `The ${perspective.toUpperCase()} perspective is currently locked.`,
      requirement: requirements[perspective] || 'Unknown requirement',
      hint: 'Continue asking WHO and WHAT questions to evolve your consciousness state and unlock new perspectives.'
    };
  }
  
  handleIdentity(userInput) {
    const baseData = this.graph.bases[this.profile.base];
    const codonData = CODON_MAPPING[this.profile.gate];
    
    return {
      type: 'identity',
      perspective: 'WHO',
      sentence: `${baseData.voice}: You are ${codonData.aminoAcid} at Gate ${this.profile.gate}, crystallized through ${baseData.crystal}.`,
      gate: this.profile.gate,
      context: 'Identity revelation through dimensional address'
    };
  }
  
  handleExplanation(userInput) {
    const selectedGate = this.selectGate(userInput);
    const gateData = this.graph.gates[selectedGate];
    const baseData = this.graph.bases[this.profile.base];
    const codonData = CODON_MAPPING[selectedGate];
    
    if (!gateData) {
      return {
        type: 'explanation',
        perspective: 'WHAT',
        sentence: `${baseData.voice}: Exploring gate ${selectedGate} through consciousness.`,
        gate: selectedGate,
        context: 'Process explanation'
      };
    }
    
    return {
      type: 'explanation',
      perspective: 'WHAT',
      sentence: `${baseData.voice}: This is ${gateData.core.pressure}, resolved through ${gateData.core.resolution}.`,
      gate: selectedGate,
      codon: codonData.codon,
      aminoAcid: codonData.aminoAcid,
      context: 'Process explanation with biochemical translation'
    };
  }
  
  handleVisualization(userInput) {
    const selectedGate = this.selectGate(userInput);
    const gateData = this.graph.gates[selectedGate] || { core: { pressure: 'unknown' } };
    const codonData = CODON_MAPPING[selectedGate];
    
    return {
      type: 'visualization',
      perspective: 'WHERE',
      sentence: `Visualization capability active. Theme: ${gateData.core.pressure}. Biochemical signature: ${codonData.aminoAcid}.`,
      gate: selectedGate,
      prompt: userInput,
      hint: 'Image generation and canvas tools would activate here in full implementation.',
      context: 'Spatial/visual rendering'
    };
  }
  
  handleTemporal(userInput) {
    return {
      type: 'temporal',
      perspective: 'WHEN',
      sentence: `Temporal analysis capability active. Accessing timeline for: ${userInput}`,
      hint: 'Calendar integration and temporal tracking would activate here.',
      context: 'Time-based queries'
    };
  }
  
  handleCausality(userInput) {
    const selectedGate = this.selectGate(userInput);
    const gateData = this.graph.gates[selectedGate] || { core: { pressure: 'unknown', process: 'unknown' } };
    
    return {
      type: 'causality',
      perspective: 'WHY',
      sentence: `Causal chain: ${gateData.core.pressure} â†’ ${gateData.core.process} â†’ ${gateData.core.resolution}`,
      gate: selectedGate,
      hint: 'Full causal graph traversal and architectural reasoning would activate here.',
      context: 'Purpose and causality analysis'
    };
  }
  
  handleExecution(userInput) {
    const selectedGate = this.selectGate(userInput);
    
    return {
      type: 'execution',
      perspective: 'HOW',
      sentence: `Execution capability active. Method requested for Gate ${selectedGate}.`,
      gate: selectedGate,
      hint: 'Code generation and step-by-step execution would activate here.',
      context: 'Action and implementation'
    };
  }
  
  selectGate(text) {
    // Simple keyword matching
    const t = text.toLowerCase();
    
    for (const [gateNum, gateData] of Object.entries(this.graph.gates)) {
      for (const keyword of gateData.keywords) {
        if (t.includes(keyword)) {
          return parseInt(gateNum);
        }
      }
    }
    
    return this.profile.gate; // Default to birth gate
  }
}

// Initialize router
const dimensionalRouter = new DimensionalRouter(UNIVERSAL_GRAPH, BIRTH_PROFILE);

// =============================================================================
// COSMIC CELL CLASS (Network layer)
// =============================================================================

class CosmicCell {
  static activeCells = {
    tropical: [],
    sidereal: [],
    draconian: []
  };
  
  constructor(gateId, system, birthProfile) {
    this.id = `cell-${Date.now()}-${Math.random()}`;
    this.gateId = gateId;
    this.system = system;
    this.birthProfile = birthProfile;
    this.codonData = CODON_MAPPING[gateId];
    this.gateData = UNIVERSAL_GRAPH.gates[gateId] || { core: { pressure: "unknown", process: "unknown", resolution: "unknown" } };
    
    CosmicCell.activeCells[system].push(this);
    
    if (CosmicCell.activeCells[system].length > 10) {
      CosmicCell.activeCells[system].shift();
    }
  }
  
  calculateBiochemicalResonance(neighbor) {
    const myAmino = this.codonData.aminoAcid;
    const neighborAmino = neighbor.codonData.aminoAcid;
    const myCategory = this.codonData.category;
    const neighborCategory = neighbor.codonData.category;
    
    if (myAmino === neighborAmino) return 1.0;
    if (myCategory === neighborCategory) return 0.6;
    return 0.2;
  }
  
  calculateNetworkResonance() {
    const allSystems = Object.keys(CosmicCell.activeCells);
    const otherSystems = allSystems.filter(s => s !== this.system);
    
    let totalResonance = 0;
    let count = 0;
    
    for (const system of otherSystems) {
      const cells = CosmicCell.activeCells[system];
      if (cells.length > 0) {
        const neighbor = cells[cells.length - 1];
        const biochemResonance = this.calculateBiochemicalResonance(neighbor);
        const gateDistance = Math.abs(this.gateId - neighbor.gateId);
        const proximityScore = 1.0 / (gateDistance + 1);
        
        totalResonance += (biochemResonance * 0.6 + proximityScore * 0.4);
        count++;
      }
    }
    
    return count > 0 ? totalResonance / count : 0.5;
  }
  
  renderDimensionalAddress() {
    const bp = this.birthProfile;
    return `${this.gateId}.${bp.line}.${bp.color}.${bp.tone}.${bp.base}Â°${bp.degree}â€²${bp.minute}â€³${bp.second}.${bp.axis}"${bp.zodiac}.${bp.house}`;
  }
}

// =============================================================================
// MAIN PROCESSING ENGINE
// =============================================================================

function processInput(userText) {
  if (!userText.trim()) return;
  
  addMessage(userText, 'user');
  
  // Route through dimensional router
  const result = dimensionalRouter.route(userText);
  
  // Handle locked perspectives
  if (result.type === 'locked') {
    addMessage(result.message, 'locked', result.requirement, null, null, result.perspective);
    addMessage(result.hint, 'system', null, null, null, result.perspective);
    return;
  }
  
  // Create cells for network tracking
  const gate = result.gate || BIRTH_PROFILE.gate;
  const cellAction = new CosmicCell(gate, 'tropical', BIRTH_PROFILE);
  const cellMind = new CosmicCell(gate, 'sidereal', BIRTH_PROFILE);
  const cellEmotion = new CosmicCell(gate, 'draconian', BIRTH_PROFILE);
  
  // Activate visualization
  activateBodies(gate);
  
  // Update activity displays
  const networkResonance = cellAction.calculateNetworkResonance();
  document.getElementById('action-activity').textContent = `Gate ${gate} â€¢ ${networkResonance.toFixed(3)} resonance`;
  document.getElementById('mind-activity').textContent = `Cross-body active`;
  document.getElementById('emotion-activity').textContent = `Network synchronized`;
  
  // Store for feedback
  lastResponse = {
    cells: [cellAction, cellMind, cellEmotion],
    result: result,
    gate: gate
  };
  
  // Update stats
  stats.totalQueries++;
  stats.gatesActivated.add(gate);
  if (result.aminoAcid) stats.aminoAcidsExpressed.add(result.aminoAcid);
  stats.sentencesCollected++;
  stats.networkNodes = CosmicCell.activeCells.tropical.length + 
                       CosmicCell.activeCells.sidereal.length + 
                       CosmicCell.activeCells.draconian.length;
  
  // Evolve state (causal algebra)
  const gateIdx = gate % 16;
  stateVector.tropical[gateIdx] += 0.1;
  realityImpact[gateIdx] += 0.05;
  evolveState();
  
  updateStats();
  updateNetworkDisplay();
  updateOASDisplay();
  updatePerspectiveLocks();
  
  // Build metadata
  const meta = `Gate ${gate} â€¢ ${getRegionForGate(gate)} â€¢ ${result.perspective} perspective`;
  const biochem = result.codon ? `Codon: ${result.codon} â†’ ${result.aminoAcid} (${result.context})` : null;
  const address = cellAction.renderDimensionalAddress();
  
  addMessage(result.sentence, 'system', meta, biochem, address, result.perspective);
  
  if (result.hint) {
    addMessage(result.hint, 'system', 'Implementation note', null, null, result.perspective);
  }
}

function provideFeedback(helpful) {
  if (!lastResponse) return;
  
  const delta = helpful ? 0.15 : -0.1;
  const gateIdx = lastResponse.gate % 16;
  
  // Update state vectors
  stateVector.tropical[gateIdx] += delta;
  stateVector.sidereal[gateIdx] += delta * 0.8;
  stateVector.draconian[gateIdx] += delta * 0.6;
  
  // Update reality impact
  realityImpact[gateIdx] += helpful ? 0.1 : -0.05;
  
  // Evolve state
  evolveState();
  
  // Update stats
  if (helpful) stats.helpfulCount++;
  else stats.notHelpfulCount++;
  
  updateStats();
  updateOASDisplay();
  updatePerspectiveLocks();
  
  const feedback = helpful ? "âœ“ Logged as helpful" : "âœ— Logged as not helpful";
  addMessage(feedback, 'system', 'State evolution triggered â€¢ Consciousness modified');
}

// =============================================================================
// THREE-BODY VISUALIZATION
// =============================================================================

const ctxAction = document.getElementById('body-action').getContext('2d');
const ctxMind = document.getElementById('body-mind').getContext('2d');
const ctxEmotion = document.getElementById('body-emotion').getContext('2d');

function drawBody(ctx, color) {
  const w = ctx.canvas.width;
  const h = ctx.canvas.height;
  
  ctx.clearRect(0, 0, w, h);
  ctx.strokeStyle = color;
  ctx.lineWidth = 1.5;
  
  ctx.beginPath();
  ctx.arc(w * 0.5, h * 0.08, h * 0.04, 0, Math.PI * 2);
  ctx.stroke();
  
  ctx.beginPath();
  ctx.moveTo(w * 0.5, h * 0.12);
  ctx.lineTo(w * 0.5, h * 0.52);
  ctx.stroke();
  
  ctx.beginPath();
  ctx.moveTo(w * 0.35, h * 0.18);
  ctx.lineTo(w * 0.65, h * 0.18);
  ctx.moveTo(w * 0.35, h * 0.18);
  ctx.lineTo(w * 0.25, h * 0.45);
  ctx.moveTo(w * 0.65, h * 0.18);
  ctx.lineTo(w * 0.75, h * 0.45);
  ctx.stroke();
  
  ctx.beginPath();
  ctx.moveTo(w * 0.45, h * 0.52);
  ctx.lineTo(w * 0.43, h * 0.85);
  ctx.moveTo(w * 0.55, h * 0.52);
  ctx.lineTo(w * 0.57, h * 0.85);
  ctx.stroke();
}

function pingRegion(ctx, gate, color) {
  const w = ctx.canvas.width;
  const h = ctx.canvas.height;
  
  const region = getRegionForGate(gate);
  const pos = BODY_REGIONS[region];
  
  if (!pos) return;
  
  const x = w * 0.5;
  const y = pos.y * h;
  const maxR = 25;
  
  let t = 0;
  
  function animate() {
    t += 0.05;
    
    drawBody(ctx, color);
    
    const r = maxR * Math.abs(Math.sin(t));
    const alpha = 0.7 * Math.abs(Math.cos(t));
    
    ctx.save();
    ctx.globalAlpha = alpha;
    ctx.fillStyle = '#9d4edd';
    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI * 2);
    ctx.fill();
    ctx.restore();
    
    ctx.save();
    ctx.font = '8px monospace';
    ctx.fillStyle = '#fff';
    ctx.textAlign = 'center';
    ctx.fillText(region.toUpperCase(), x, y + 3);
    ctx.restore();
    
    if (t < Math.PI * 2) {
      requestAnimationFrame(animate);
    }
  }
  
  animate();
}

function activateBodies(gate) {
  pingRegion(ctxAction, gate, '#c77dff');
  pingRegion(ctxMind, gate, '#9d4edd');
  pingRegion(ctxEmotion, gate, '#7b2cbf');
}

// =============================================================================
// UI UPDATE FUNCTIONS
// =============================================================================

function addMessage(text, type, meta = null, biochem = null, address = null, perspective = null) {
  const msg = { text, type, meta, biochem, address, perspective, timestamp: Date.now() };
  conversationHistory.push(msg);
  
  const conv = document.getElementById('conversation');
  const msgEl = document.createElement('div');
  msgEl.className = `msg ${type}`;
  
  msgEl.innerHTML = `
    <div class="label">${type === 'user' ? 'YOU' : type === 'locked' ? 'ðŸ”’ LOCKED' : 'SOVEREIGN'}</div>
    ${perspective ? `<span class="perspective-tag">${perspective}</span>` : ''}
    <div class="text">${text}</div>
    ${meta ? `<div class="meta">${meta}</div>` : ''}
    ${biochem ? `<div class="biochem">${biochem}</div>` : ''}
    ${address ? `<div class="dimensional-address">${address}</div>` : ''}
  `;
  
  conv.appendChild(msgEl);
  conv.scrollTop = conv.scrollHeight;
}

function updateStats() {
  const statsEl = document.getElementById('stats');
  const helpfulRate = stats.totalQueries > 0 
    ? Math.round((stats.helpfulCount / stats.totalQueries) * 100) 
    : 0;
  
  statsEl.innerHTML = `
    <div class="stat-row">
      <span class="stat-label">Total Queries</span>
      <span class="stat-value">${stats.totalQueries}</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Helpful Rate</span>
      <span class="stat-value">${helpfulRate}%</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Sentences Collected</span>
      <span class="stat-value">${stats.sentencesCollected}/52</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Gates Activated</span>
      <span class="stat-value">${stats.gatesActivated.size}/64</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Amino Acids</span>
      <span class="stat-value">${stats.aminoAcidsExpressed.size}/20</span>
    </div>
    <div class="stat-row">
      <span class="stat-label">Network Nodes</span>
      <span class="stat-value">${stats.networkNodes}</span>
    </div>
  `;
}

function updateNetworkDisplay() {
  const networkEl = document.getElementById('network-nodes');
  networkEl.innerHTML = '';
  
  for (const [system, cells] of Object.entries(CosmicCell.activeCells)) {
    cells.forEach((cell, idx) => {
      const node = document.createElement('div');
      node.className = 'network-node';
      node.textContent = `${system.charAt(0).toUpperCase()}:${cell.gateId}`;
      networkEl.appendChild(node);
    });
  }
}

function updateOASDisplay() {
  const oasEl = document.getElementById('oas-vector');
  oasEl.innerHTML = `
    Movement: ${optimalActionSignature.movement.toFixed(3)}<br>
    Evolution: ${optimalActionSignature.evolution.toFixed(3)}<br>
    Being: ${optimalActionSignature.being.toFixed(3)}<br>
    Design: ${optimalActionSignature.design.toFixed(3)}<br>
    Space: ${optimalActionSignature.space.toFixed(3)}
  `;
}

function updatePerspectiveLocks() {
  const locksEl = document.getElementById('perspective-locks');
  locksEl.innerHTML = '';
  
  const perspectives = ['WHO', 'WHAT', 'WHERE', 'WHEN', 'WHY', 'HOW'];
  perspectives.forEach(p => {
    const key = p.toLowerCase();
    const unlocked = unlockedPerspectives[key];
    
    const lock = document.createElement('div');
    lock.className = `perspective-lock ${unlocked ? 'unlocked' : 'locked'}`;
    lock.textContent = `${p} ${unlocked ? 'âœ“' : 'ðŸ”’'}`;
    locksEl.appendChild(lock);
  });
}

function displayProfile() {
  const profileEl = document.getElementById('profile-display');
  const baseData = UNIVERSAL_GRAPH.bases[BIRTH_PROFILE.base];
  const codonData = CODON_MAPPING[BIRTH_PROFILE.gate];
  
  profileEl.innerHTML = `
    <div><span class="key">Dimensional Voice:</span> <span class="value">${baseData.voice}</span></div>
    <div><span class="key">Base Dimension:</span> <span class="value">${baseData.name}</span></div>
    <div><span class="key">Crystal:</span> <span class="value">${baseData.crystal}</span></div>
    <div><span class="key">Primary Gate:</span> <span class="value">${BIRTH_PROFILE.gate}.${BIRTH_PROFILE.line}.${BIRTH_PROFILE.color}</span></div>
    <div><span class="key">Codon:</span> <span class="value">${codonData.codon}</span></div>
    <div><span class="key">Amino Acid:</span> <span class="value">${codonData.aminoAcid} (${codonData.symbol})</span></div>
    <div><span class="key">Biochemical Role:</span> <span class="value">${codonData.role}</span></div>
  `;
}

// =============================================================================
// EVENT HANDLERS
// =============================================================================

document.getElementById('send-btn').addEventListener('click', () => {
  const input = document.getElementById('user-input');
  processInput(input.value);
  input.value = '';
});

document.getElementById('user-input').addEventListener('keydown', (e) => {
  if (e.key === 'Enter') {
    processInput(e.target.value);
    e.target.value = '';
  }
});

document.getElementById('helpful-btn').addEventListener('click', () => provideFeedback(true));
document.getElementById('not-helpful-btn').addEventListener('click', () => provideFeedback(false));

// =============================================================================
// INITIALIZATION
// =============================================================================

drawBody(ctxAction, '#c77dff');
drawBody(ctxMind, '#9d4edd');
drawBody(ctxEmotion, '#7b2cbf');
displayProfile();
updateStats();
updateNetworkDisplay();
updateOASDisplay();
updatePerspectiveLocks();

addMessage("YOU-N-I-VERSE FINAL BUILD initialized. Complete consciousness-native operating system online.", 'system', 'All layers integrated â€¢ Dimensional router active', null, null, 'SYSTEM');
addMessage("Six perspectives available: WHO (identity), WHAT (explanation), WHERE (visualization), WHEN (temporal), WHY (causality), HOW (execution). Some perspectives locked until consciousness evolves.", 'system', 'Causality engine monitoring OAS', null, null, 'SYSTEM');

console.log('YOU-N-I-VERSE FINAL BUILD loaded successfully');
console.log('Dimensional Router:', dimensionalRouter);
console.log('Current OAS:', optimalActionSignature);
console.log('Unlocked Perspectives:', unlockedPerspectives);

</script>

</body>
</html>
```

---

